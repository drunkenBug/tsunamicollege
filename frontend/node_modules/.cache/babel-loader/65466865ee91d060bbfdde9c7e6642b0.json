{"remainingRequest":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/babel-loader/lib/index.js!/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/guiseppe/fun/online/tsunamicollege/frontend/src/views/Test.vue?vue&type=template&id=5b2d5ecc","dependencies":[{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/src/views/Test.vue","mtime":1620676982554},{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1616415317878},{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/babel-loader/lib/index.js","mtime":1616415317834},{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616415319211},{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1616415317878},{"path":"/Users/guiseppe/fun/online/tsunamicollege/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1616415319210}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAidGVzdCIKfTsKCnZhciBfaG9pc3RlZF8yID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiZmFjZS1pbWFnZSIsCiAgc3R5bGU6IHsKICAgICJ6LWluZGV4IjogIi0xMDAiLAogICAgImJhY2tncm91bmQiOiAiYmxhY2siCiAgfQp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMyA9IHsKICByZWY6ICJmYWNlIiwKICBjbGFzczogImZhY2UtaW1hZ2UiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGlkOiAic3RhciIsCiAgcmVmOiAic3RhciIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiY29sb3IiCn0sIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF82ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiZmFjZSIKfSwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzcgPSB7CiAga2V5OiAwCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfUXVlc3Rpb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiUXVlc3Rpb24iKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2hvaXN0ZWRfNV0sIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApXSwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIF9ob2lzdGVkXzYsIF9jcmVhdGVDb21tZW50Vk5vZGUoIiA8aDE+e3t0b3BpY319PC9oMT4gIiksICRkYXRhLnF1ZXN0aW9uc0xvYWRlZCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X1F1ZXN0aW9uLCB7CiAgICBjb250ZW50OiAkZGF0YS5xdWVzdGlvbiwKICAgIHJlZjogInF1ZXN0aW9uIiwKICAgIG9uRmFpbGVkOiAkb3B0aW9ucy5mYWlsZWQsCiAgICBvblNvbHZlZDogJG9wdGlvbnMuc29sdmVkLAogICAgb25OZXh0OiAkb3B0aW9ucy5uZXh0CiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbImNvbnRlbnQiLCAib25GYWlsZWQiLCAib25Tb2x2ZWQiLCAib25OZXh0Il0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSk7Cn0="},{"version":3,"sources":["/Users/guiseppe/fun/online/tsunamicollege/frontend/src/views/Test.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC;;;8BACT,YAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC,YAEL;AAFkB,EAAA,KAAqC,EAArC;AAAA,eAAA,MAAA;AAAA,kBAAA;AAAA;AAElB,CAFN,E,IAAA,E;;AAAA,C;;;AAGK,EAAA,GAAG,EAAC,M;AAAO,EAAA,KAAK,EAAC;;;AACf,EAAA,EAAE,EAAC,M;AAAO,EAAA,GAAG,EAAC;;;8BACjB,YAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAAkB,IAAlB,EAAkB,CAAA;AAAA;AAAlB,C;;8BAOJ,YAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAAiB,IAAjB,EAAiB,CAAA;AAAA;AAAjB,C;;;;;;;;uBAbF,YAAA,CAsBM,KAtBN,EAAA,UAAA,EAsBM,CArBJ,UAqBI,EAlBJ,YAAA,CAQM,KARN,EAAA,UAAA,EAQM,CAPJ,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,UAII,CALN,E;;AAAA,GAOI,CARN,E;;AAAA,GAkBI,EATJ,UASI,EALJ,mBAAA,CAAA,sBAAA,CAKI,EAJO,KAAA,CAAA,e,kBAAX,YAAA,CAEM,KAFN,EAEM,UAFN,EAEM,CADJ,YAAA,CAA6F,mBAA7F,EAA6F;AAAlF,IAAA,OAAO,EAAE,KAAA,CAAA,QAAyE;AAA/D,IAAA,GAAG,EAAC,UAA2D;AAA/C,IAAA,QAAM,EAAE,QAAA,CAAA,MAAuC;AAA9B,IAAA,QAAM,EAAE,QAAA,CAAA,MAAsB;AAAb,IAAA,MAAI,EAAE,QAAA,CAAA;AAAO,GAA7F,E,IAAA,E;;AAAA,I,6CAAA,CACI,CAFN,C,qCAII,CAtBN,C","sourcesContent":["<template>\n  <div class=\"test\">\n    <div class=\"face-image\" style=\"z-index:-100;background:black\">\n\n    </div>\n    <div ref=\"face\" class=\"face-image\" >\n      <div id=\"star\" ref='star'>\n        <div class=\"color\">\n\n        </div>\n\n      </div>\n\n    </div>\n    <div class=\"face\">\n\n    </div>\n\n    <!-- <h1>{{topic}}</h1> -->\n    <div v-if=\"questionsLoaded\">\n      <Question :content=\"question\" ref=\"question\" @failed=\"failed\" @solved=\"solved\" @next=\"next\"/>\n    </div>\n\n  </div>\n\n\n</template>\n\n<script>\nimport Question from '../components/Question.vue'\nimport axios from 'axios'\nexport default {\n  name: 'Test',\n  components: {\n    Question\n  },\n  data(){\n    return {\n      questionsLoaded:false,\n      question:{},\n      data:[],\n      index:1,\n      topic:this.$route.params.id,\n\n      hist:[-1],\n\n      diffscale:0.2,//how much does the difference in difficulty get accounted for\n      reward:1,\n      penalty:0.8,\n\n    }\n  },\n  mounted(){\n    if (localStorage[this.topic]==null){\n      // console.log(\"no data on topic \",this.topic);\n      localStorage[this.topic]=0\n    }\n    // console.log(\"skill level:\",localStorage[this.topic]);\n    var rating=Math.round(localStorage[this.topic])\n    // console.log('hist: ',this.hist);\n    this.getNewQuestion(this.topic,rating)\n    //this.$refs.face.classList.add(\"right\")\n    // console.log(this.$refs.face);\n  },\n  methods:{\n    joy(){\n      this.$refs.star.classList.remove(\"impuls\")\n      setTimeout(()=>{\n        this.$refs.star.classList.add('impuls')\n      },10)\n    },\n\n    getTopicInfo(topic){\n      var data={\"op\":\"GETINFO\",\"topic\":topic,\"no\":0}\n      axios({method:\"POST\",url:\"/api/getTopicInfo\",data:data,headers:{\"content-type\":\"text/plain\"}}).then(result=>{\n        localStorage[topic+\"Info\"]=JSON.stringify(result.data);\n      })\n    },\n\n    getNewQuestion(topic,rating){\n      var data={'topic':topic,'rating':rating,'history':this.hist}\n      axios({method:'POST',url:'api/new',data:data,headers:{'content-type':'text/plain'}}).then(result =>{\n        this.question=result.data\n        this.questionsLoaded=true\n\n      }).catch(error=>{\n        console.log(error);\n      })\n    },\n    solved(){\n      this.rating=parseFloat(localStorage[this.topic])\n      var difference=this.question.rating-this.rating\n      var change = Math.max(0,this.reward+difference*this.diffscale)\n      this.rating+=change\n      localStorage[this.topic]=this.rating\n      this.joy()\n\n\n    },\n    failed(){\n      this.rating=parseFloat(localStorage[this.topic])\n      var difference=this.question.rating=this.rating\n      var change = Math.max(0,this.penalty+difference*this.diffscale)\n      this.rating-=change\n      localStorage[this.topic]=this.rating\n\n    },\n    resetSkill(){\n      localStorage[this.topic]=0\n    },\n\n\n    next(){\n      this.hist.push(this.question.id)\n      if (this.hist.length>10){\n        this.hist=this.hist.slice(-10)\n      }\n\n      var rating=Math.round(localStorage[this.topic])\n      // var hist = JSON.stringify(this.hist)\n      this.getNewQuestion(this.topic,rating)\n      this.$refs.question.start()\n      // this.$refs.star.classList.remove(\"impuls\")\n    },\n\n  }\n}\n</script>\n"],"sourceRoot":""}]}